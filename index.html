<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸ’› æ¨‚æ´»æ¼«æ­¥ï¼Œæ¢ç´¢äººç”Ÿï¼šå…­å€‹æ–¹æ³•èˆ‡å¿ƒæƒ…æµå‹•åœ–</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: 'Noto Sans TC', sans-serif; margin: 20px; background-color: #FFFDF5; color: #333; line-height: 1.6; }
  h1, h2 { color: #4A7C59; }
  .section { background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); margin-bottom: 24px; padding: 20px; border-left: 6px solid #4A7C59; }
  .method1 { border-left-color: #5B8C5A; }
  .method2 { border-left-color: #E8A87C; }
  .method3 { border-left-color: #77B1D3; }
  .method4 { border-left-color: #B497BD; }
  .method5 { border-left-color: #A3B18A; }
  .method6 { border-left-color: #C19A6B; }
  textarea { width: 100%; min-height: 60px; padding: 8px; margin-top: 8px; margin-bottom: 16px; border: 1px solid #ccc; border-radius: 6px; font-size: 1em; }
  .checkbox-list { list-style-type: none; padding: 0; }
  .checkbox-list li { margin-bottom: 6px; }
  button { background-color: #4A7C59; color: white; border: none; border-radius: 6px; padding: 8px 16px; cursor: pointer; margin: 5px; }
  button:hover { background-color: #3F6D4F; }
  .mood-section { font-size: 1.1em; }
  .mood-select { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  #daySelector { font-size: 1.1em; padding: 6px; border-radius: 6px; border: 1px solid #aaa; }
  .mood-buttons { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
  .mood-buttons button { flex: 1 1 80px; font-size: 1.1em; padding: 10px; border-radius: 8px; }
  #selectedDay { margin-top: 8px; color: #4A7C59; font-weight: bold; }
  table { width: 100%; border-collapse: collapse; }
  th, td { border: 1px solid #ccc; padding: 6px; text-align: center; }
  canvas { margin-top: 20px; background-color: #FFFDF5; border-radius: 8px; }
  .legend { display: flex; justify-content: center; gap: 10px; margin-top: 10px; }
  .legend-item { display: flex; align-items: center; gap: 6px; }
  .color-box { width: 18px; height: 18px; border-radius: 4px; }
  #moodSuggestion { margin-top: 15px; text-align: center; font-size: 1.1em; color: #4A7C59; font-weight: 500; }
  footer { text-align: center; color: #777; margin-top: 30px; font-size: 0.9em; }
</style>
</head>
<body>

<h1>ğŸ’› æ¨‚æ´»æ¼«æ­¥ï¼Œæ¢ç´¢äººç”Ÿ</h1>
<h2>ä¸»é¡Œï¼šå…­å€‹ç°¡å–®æ–¹æ³•ï¼Œå°æŠ—å­¤ç¨ã€é‡å»ºå¹¸ç¦æ„Ÿ</h2>
<p>å°æ­¥é–‹å§‹ï¼Œæ¯å¤©ç·´ç¿’ä¸€é»é»ï¼Œç”Ÿæ´»æœƒè¶Šä¾†è¶Šæ˜äº®ã€‚</p>

<!-- å…­å¤§æ–¹æ³• -->
<div class="section method1">
<h2>ä¸€ã€æ¥ç´å­¤ç¨ï¼šæ‰¿èªæ„Ÿè¦ºï¼Œæ‰èƒ½è½‰åŒ–å®ƒ</h2>
<textarea placeholder="æˆ‘ä¸Šæ¬¡è¦ºå¾—å­¤å–®ï¼Œæ˜¯ä»€éº¼æ™‚å€™ï¼Ÿé‚£æ™‚å€™æˆ‘åœ¨åšä»€éº¼ï¼Ÿ"></textarea>
<textarea placeholder="æˆ‘è¦ºå¾—è‡ªå·±æ›´åå‘ã€å­¤ç«‹ã€é‚„æ˜¯ã€å­¤ç¨ã€ï¼Ÿç‚ºä»€éº¼ï¼Ÿ"></textarea>
<ul class="checkbox-list">
  <li><input type="checkbox"> ä»Šå¤©æˆ‘èª å¯¦é¢å°è‡ªå·±çš„æƒ…ç·’</li>
  <li><input type="checkbox"> è¨˜éŒ„ä¸‹å­¤å–®æ™‚ï¼Œæˆ‘æœ€éœ€è¦çš„æ˜¯ä»€éº¼</li>
</ul>
</div>

<div class="section method2">
<h2>äºŒã€è¨‚ä¸‹è¡Œå‹•è¨ˆç•«ï¼šæ”¹è®Šå¾ä¸€å€‹ç¿’æ…£é–‹å§‹</h2>
<textarea placeholder="æˆ‘æƒ³æ”¹è®Šæˆ–é¤Šæˆå“ªä¸€å€‹å°ç¿’æ…£ï¼Ÿ"></textarea>
<ul class="checkbox-list">
  <li><input type="checkbox"> ä¸»å‹•è¯çµ¡ä¸€ä½æœ‹å‹æˆ–å®¶äºº</li>
  <li><input type="checkbox"> å‡ºé–€èµ°è·¯è¶…é 10 åˆ†é˜</li>
  <li><input type="checkbox"> å˜—è©¦å¾®ç¬‘èˆ‡äººæ‰“æ‹›å‘¼</li>
</ul>
</div>

<div class="section method3">
<h2>ä¸‰ã€æŠŠç„¦é»æ”¾åœ¨ä»–äººèº«ä¸Š</h2>
<textarea placeholder="ä»Šå¤©æˆ‘æœ‰å‚¾è½èª°ã€çœŸå¿ƒå°ä»–æ„Ÿèˆˆè¶£å—ï¼Ÿ"></textarea>
<textarea placeholder="æˆ‘èƒ½æ€éº¼è®“åˆ¥äººè¦ºå¾—è¢«ç†è§£ï¼Ÿ"></textarea>
<ul class="checkbox-list">
  <li><input type="checkbox"> å•å€™é„°å±…æˆ–æœ‹å‹è¿‘æ³</li>
  <li><input type="checkbox"> å¯«ä¸€å¥é¼“å‹µçš„è©±çµ¦æœ‹å‹</li>
</ul>
</div>

<div class="section method4">
<h2>å››ã€å–„ç”¨ç§‘æŠ€ä¿æŒé€£çµ</h2>
<textarea placeholder="æˆ‘æœ‰å“ªä½æœ‹å‹åªé€éç¶²è·¯è¯çµ¡ï¼Ÿæ˜¯å¦æƒ³ç´„è¦‹é¢ï¼Ÿ"></textarea>
<ul class="checkbox-list">
  <li><input type="checkbox"> ç”¨æ‰‹æ©Ÿæˆ–è¦–è¨Šå’ŒæŸäººèŠå¤©</li>
  <li><input type="checkbox"> å˜—è©¦å­¸ç¿’æ–°é€šè¨Š App</li>
  <li><input type="checkbox"> ä»Šå¤©æ¸›å°‘æ»‘æ‰‹æ©Ÿæ™‚é–“</li>
</ul>
</div>

<div class="section method5">
<h2>äº”ã€åƒåŠ å¿—å·¥æ´»å‹•</h2>
<textarea placeholder="æˆ‘æƒ³å˜—è©¦åƒèˆ‡å“ªä¸€ç¨®å¿—å·¥æ´»å‹•ï¼Ÿ"></textarea>
<ul class="checkbox-list">
  <li><input type="checkbox"> ç‚ºä»–äººåšä¸€ä»¶å°äº‹</li>
  <li><input type="checkbox"> è©¢å•ç¤¾å€æœ‰ç„¡å¿—å·¥æ©Ÿæœƒ</li>
</ul>
</div>

<div class="section method6">
<h2>å…­ã€å ±åå­¸ç¿’æ–°èª²ç¨‹</h2>
<textarea placeholder="æˆ‘æœ€è¿‘æƒ³å­¸ä»€éº¼ï¼Ÿæˆ–å“ªé–€èª²è®“æˆ‘æ„Ÿèˆˆè¶£ï¼Ÿ"></textarea>
<ul class="checkbox-list">
  <li><input type="checkbox"> æŸ¥è©¢èª²ç¨‹æˆ–æ´»å‹•è³‡è¨Š</li>
  <li><input type="checkbox"> å’Œæœ‹å‹è¨è«–æƒ³ä¸€èµ·å»çš„èª²</li>
</ul>
</div>

<!-- æ¯é€±è‡ªæˆ‘æª¢æŸ¥ -->
<div class="section">
<h2>ğŸŒ æ¯é€±è‡ªæˆ‘æª¢æŸ¥</h2>
<table>
<tr><th>æŒ‡æ¨™</th><th>ğŸ˜Šåšå¾—å¾ˆå¥½</th><th>ğŸ˜é‚„å¯ä»¥</th><th>ğŸ˜”éœ€è¦åŠªåŠ›</th></tr>
<tr><td>æ¯å¤©æœ‰èˆ‡äººäº’å‹•</td><td><input type="radio" name="a1"></td><td><input type="radio" name="a1"></td><td><input type="radio" name="a1"></td></tr>
<tr><td>æ„Ÿè¦ºè¢«å‚¾è½ã€è¢«é—œå¿ƒ</td><td><input type="radio" name="a2"></td><td><input type="radio" name="a2"></td><td><input type="radio" name="a2"></td></tr>
<tr><td>æœ‰å¹«åŠ©åˆ¥äººæˆ–åˆ†äº«å¿ƒæƒ…</td><td><input type="radio" name="a3"></td><td><input type="radio" name="a3"></td><td><input type="radio" name="a3"></td></tr>
<tr><td>æœ‰åƒèˆ‡å­¸ç¿’æˆ–ç¤¾å€æ´»å‹•</td><td><input type="radio" name="a4"></td><td><input type="radio" name="a4"></td><td><input type="radio" name="a4"></td></tr>
<tr><td>è¦ºå¾—è‡ªå·±æ¯”ä¸Šé€±æ›´é–‹å¿ƒ</td><td><input type="radio" name="a5"></td><td><input type="radio" name="a5"></td><td><input type="radio" name="a5"></td></tr>
</table>
</div>

<!-- å¿ƒæƒ…é¸æ“‡ -->
<div class="section mood-section">
<h2>ğŸ’¬ ä»Šå¤©çš„å¿ƒæƒ…</h2>
<p>é¸æ“‡æ—¥æœŸèˆ‡æ„Ÿå—ï¼Œå¹«è‡ªå·±ç•™ä¸‹å°å°è¨˜éŒ„ï¼š</p>
<div class="mood-select">
  <label for="daySelector">ğŸ“… é¸æ“‡æ˜ŸæœŸï¼š</label>
  <select id="daySelector"></select>
</div>
<div class="mood-buttons">
  <button onclick="recordMood(1, 'ğŸ˜” ä½è½')">ğŸ˜” ä½è½</button>
  <button onclick="recordMood(2, 'ğŸ˜ é‚„å¥½')">ğŸ˜ é‚„å¥½</button>
  <button onclick="recordMood(3, 'ğŸ™‚ å¹³éœ')">ğŸ™‚ å¹³éœ</button>
  <button onclick="recordMood(4, 'ğŸ˜Š é–‹æœ—')">ğŸ˜Š é–‹æœ—</button>
  <button onclick="recordMood(5, 'ğŸŒ å¹¸ç¦')">ğŸŒ å¹¸ç¦</button>
</div>
<p id="selectedDay"></p>
<p id="feedback" style="margin-top:10px; font-size:1.1em; color:#4A7C59;"></p>
</div>

<!-- å¿ƒæƒ…æµå‹•åœ– -->
<div class="section">
<h2>ğŸ“ˆ æˆ‘çš„å¿ƒæƒ…æµå‹•åœ–</h2>
<canvas id="moodChart" width="400" height="200"></canvas>
<p id="chartDate" style="text-align:center; color:#777; font-size:0.9em;"></p>
<div class="legend">
  <div class="legend-item"><div class="color-box" style="background-color:#B0C4DE"></div>ä½è½</div>
  <div class="legend-item"><div class="color-box" style="background-color:#9FD9B0"></div>é‚„å¥½</div>
  <div class="legend-item"><div class="color-box" style="background-color:#F6E3A1"></div>å¹³éœ</div>
  <div class="legend-item"><div class="color-box" style="background-color:#FFD480"></div>é–‹æœ—</div>
  <div class="legend-item"><div class="color-box" style="background-color:#FFB6B9"></div>å¹¸ç¦</div>
</div>
<h3 style="text-align:center; color:#4A7C59;">ğŸŒ¿ æœ¬é€±å¿ƒæƒ…é™ªä¼´å»ºè­°</h3>
<p id="moodSuggestion"></p>
<button onclick="saveChart()">ğŸ“¥ ä¸‹è¼‰æˆ‘çš„å¿ƒæƒ…æµå‹•åœ–</button>
</div>

<!-- æ¯é€±å°çµ -->
<div class="section">
<h2>ğŸ“” æ¯é€±å°çµ</h2>
<p>é€™é€±æˆ‘æœ€å¤§çš„æ”¶ç©«æ˜¯ä»€éº¼ï¼Ÿä¸‹é€±æˆ‘æƒ³è©¦è‘—å¤šåšäº›ä»€éº¼ï¼Ÿ</p>
<textarea id="weeklySummary" placeholder="å¯«ä¸‹ä½ çš„æƒ³æ³•æˆ–æ„Ÿå—..."></textarea>
</div>

<button onclick="clearAllData()" style="background-color:#b43f3f;">ğŸ§¹ æ¸…é™¤æ‰€æœ‰ç´€éŒ„</button>

<script>
const days=['é€±ä¸€','é€±äºŒ','é€±ä¸‰','é€±å››','é€±äº”','é€±å…­','é€±æ—¥'];
const ctx=document.getElementById('moodChart').getContext('2d');
const colors=['#B0C4DE','#9FD9B0','#F6E3A1','#FFD480','#FFB6B9'];

const gradient=ctx.createLinearGradient(0,0,0,200);
gradient.addColorStop(0,'rgba(255,212,128,0.5)');
gradient.addColorStop(1,'rgba(255,182,185,0.2)');

const moodChart=new Chart(ctx,{type:'line',data:{labels:days,datasets:[{data:new Array(7).fill(null),borderColor:'#4A7C59',backgroundColor:gradient,fill:true,tension:0.4,pointRadius:6,pointBackgroundColor:new Array(7).fill('#ccc')}]},options:{plugins:{legend:{display:false}},scales:{y:{min:0,max:5,ticks:{display:false},grid:{display:false}}}}});

function initDaySelector(){
 const s=document.getElementById('daySelector');
 s.innerHTML='';
 days.forEach((d,i)=>{const o=document.createElement('option');o.value=i;o.textContent=d;s.appendChild(o);});
 const t=new Date().getDay();
 s.value=t===0?6:t-1;
 updateSelectedDayLabel();
 s.addEventListener('change',updateSelectedDayLabel);
}
function updateSelectedDayLabel(){
 const i=document.getElementById('daySelector').value;
 document.getElementById('selectedDay').textContent=`ç›®å‰é¸æ“‡çš„æ˜¯ï¼š${days[i]}`;
}
function recordMood(level,label){
 const i=document.getElementById('daySelector').value;
 moodChart.data.datasets[0].data[i]=level;
 moodChart.data.datasets[0].pointBackgroundColor[i]=colors[level-1];
 moodChart.update();
 document.getElementById('feedback').textContent=`å·²è¨˜éŒ„ ${days[i]} çš„å¿ƒæƒ…ï¼š${label}`;
 updateMoodSuggestion();
 saveToLocalStorage();
}
function updateMoodSuggestion(){
 const data=moodChart.data.datasets[0].data.filter(v=>v!==null);
 if(data.length===0)return;
 const avg=data.reduce((a,b)=>a+b,0)/data.length;
 const diff=data[data.length-1]-data[0];
 let suggestion='';
 if(diff>1&&avg>3)suggestion='ğŸŒˆ ä½ é€™é€±è¶Šä¾†è¶Šé–‹æœ—ï¼Œç¹¼çºŒä¿æŒèˆ‡äººäº’å‹•ï¼Œå¹¸ç¦æ­£åœ¨æ“´æ•£å–”ï¼';
 else if(diff<-1)suggestion='â˜ï¸ é€™é€±å¯èƒ½æœ‰é»ä½æ½®ï¼Œåˆ¥å¿˜äº†çµ¦è‡ªå·±å°å°ä¼‘æ¯èˆ‡é—œå¿ƒã€‚';
 else if(avg>=3&&avg<4)suggestion='ğŸŒ¿ ç©©å®šæ˜¯å¹¸ç¦çš„åŸºç¤ï¼Œé©åº¦å˜—è©¦æ–°æ´»å‹•ï¼Œè®“å¿ƒæƒ…å¤šäº›äº®é»ï¼';
 else suggestion='ğŸŒŠ æƒ…ç·’æœ‰èµ·ä¼å¾ˆæ­£å¸¸ï¼Œè©¦è‘—è¨˜éŒ„è§¸å‹•ä½ çš„æ™‚åˆ»ï¼Œæœƒæœ‰æ–°ç™¼ç¾ã€‚';
 document.getElementById('moodSuggestion').textContent=suggestion;
}
function saveChart(){
 const canvas=document.getElementById('moodChart');
 const now=new Date();
 const weekNum=getWeekNumber(now);
 const start=new Date(now);
 start.setDate(now.getDate()-now.getDay()+1);
 const end=new Date(start);
 end.setDate(start.getDate()+6);
 const range=`${start.toLocaleDateString()}â€“${end.toLocaleDateString()}`;
 const title=`ğŸ’› æ¨‚é½¡å¿ƒç†å¥åº·å­¸ç¿’å–®ï½œæˆ‘çš„å¿ƒæƒ…æµå‹•åœ–ï½œ${range}`;
 const temp=document.createElement('canvas');
 temp.width=canvas.width; temp.height=canvas.height+40;
 const tctx=temp.getContext('2d');
 tctx.fillStyle="#FFFDF5"; tctx.fillRect(0,0,temp.width,temp.height);
 tctx.font="16px Noto Sans TC"; tctx.fillStyle="#4A7C59";
 tctx.fillText(title,20,25);
 tctx.drawImage(canvas,0,40);
 temp.toBlob(function(blob){
   const link=document.createElement('a');
   link.href=URL.createObjectURL(blob);
   link.download=`æˆ‘çš„å¿ƒæƒ…æµå‹•_${now.getFullYear()}W${weekNum}_${range}.png`;
   link.click();
 });
}
function getWeekNumber(d){d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));const y=new Date(Date.UTC(d.getUTCFullYear(),0,1));return Math.ceil((((d-y)/86400000)+1)/7);}
function saveToLocalStorage(){
 const data={
  textareas:Array.from(document.querySelectorAll('textarea')).map(t=>t.value),
  checkboxes:Array.from(document.querySelectorAll('input[type="checkbox"]')).map(c=>c.checked),
  radios:Array.from(document.querySelectorAll('input[type="radio"]')).map(r=>r.checked),
  chart:moodChart.data.datasets[0].data,
  colors:moodChart.data.datasets[0].pointBackgroundColor
 };
 localStorage.setItem('moodData',JSON.stringify(data));
}
function loadFromLocalStorage(){
 const data=JSON.parse(localStorage.getItem('moodData'));
 if(!data)return;
 document.querySelectorAll('textarea').forEach((t,i)=>t.value=data.textareas[i]||'');
 document.querySelectorAll('input[type="checkbox"]').forEach((c,i)=>c.checked=!!data.checkboxes[i]);
 document.querySelectorAll('input[type="radio"]').forEach((r,i)=>r.checked=!!data.radios[i]);
 if(data.chart){
  moodChart.data.datasets[0].data=data.chart;
  moodChart.data.datasets[0].pointBackgroundColor=data.colors;
  moodChart.update();
  updateMoodSuggestion();
 }
}
function clearAllData(){
 if(confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç´€éŒ„å—ï¼Ÿæ­¤å‹•ä½œç„¡æ³•å¾©åŸã€‚')) {
    localStorage.removeItem('moodData');
    location.reload();
  }
}
document.addEventListener('input', saveToLocalStorage);
window.onload = () => { initDaySelector(); loadFromLocalStorage(); };
</script>
<footer>
<p>ğŸŒ¼  è¨˜å¾—ï¼šå­¤å–®ä¸æ˜¯æ²’æœ‰äººï¼Œè€Œæ˜¯å¤±å»äº†é€£çµã€‚ä¸»å‹•ä¼¸å‡ºæ‰‹ï¼Œå°±æœƒæœ‰äººåœ¨å¦ä¸€ç«¯å›æ‡‰ä½ ã€‚</p>
</footer>
</body>
</html>

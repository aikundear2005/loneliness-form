<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¨‚é½¡ç”Ÿæ´»å¤§å“‰å• (Proç‰ˆ)</title>
    <style>
        /* --- å…¨å±€è¨­å®šï¼šä»¥èˆ’é©ã€ç„¡éšœç¤™ç‚ºä¸» --- */
        :root {
            --primary: #FF8C42; /* æ›´æœ‰æ´»åŠ›çš„æš–æ©˜ */
            --secondary: #4ECDC4; /* æ¸…çˆ½çš„è–„è·ç¶  (æ­é…è‰²) */
            --bg: #FFF8E7;
            --card-bg: #FFFFFF;
            --text: #4A4A4A;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            height: 100vh;
            overflow: hidden; /* ç¦æ­¢æ²å‹•ï¼ŒåƒAppä¸€æ¨£ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- ä¸»å®¹å™¨ï¼šå¡ç‰‡å¼è¨­è¨ˆ --- */
        #app-container {
            width: 100%;
            max-width: 500px;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: var(--bg);
        }

        /* --- é ‚éƒ¨é€²åº¦æ¢ --- */
        .header {
            padding: 20px 0;
            text-align: center;
        }
        .progress-track {
            width: 100%;
            height: 10px;
            background: #E0E0E0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.5s ease;
        }
        .step-text {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary);
        }

        /* --- é¡Œç›®å€å¡Š (æ»‘å‹•å®¹å™¨) --- */
        .quiz-wrapper {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .question-card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 10px;
            display: flex;
            flex-direction: column;
            /* åˆå§‹ç‹€æ…‹ï¼šåœ¨å³å´ç­‰å¾… */
            transform: translateX(100%); 
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            pointer-events: none; /* éš±è—æ™‚ä¸å¯é» */
        }

        .question-card.active {
            transform: translateX(0);
            opacity: 1;
            pointer-events: all;
        }

        .question-card.exit-left {
            transform: translateX(-100%) scale(0.9);
            opacity: 0;
        }

        .q-title {
            font-size: 1.6rem;
            font-weight: 800;
            line-height: 1.4;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        /* --- ç­”æ¡ˆé¸é …æŒ‰éˆ• (å¤§æŒ‰éˆ•è¨­è¨ˆ) --- */
        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: var(--card-bg);
            border: 2px solid transparent;
            padding: 20px;
            border-radius: 18px;
            font-size: 1.3rem;
            text-align: left;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.1s, background 0.2s;
            position: relative;
            overflow: hidden;
        }

        .option-btn:active {
            transform: scale(0.98);
            background-color: #FFE0B2;
        }

        /* é¸ä¸­æ™‚çš„ç‰¹æ•ˆ */
        .option-btn.selected {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(230, 126, 34, 0.4);
        }

        /* --- çµç®—é é¢ --- */
        #result-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 10;
        }
        #result-screen.show {
            transform: translateY(0);
        }

        .trophy { font-size: 5rem; margin-bottom: 20px; animation: bounce 1s infinite; }
        .result-title { font-size: 2rem; color: var(--primary); font-weight: bold; margin-bottom: 10px; }
        .result-desc { font-size: 1.4rem; color: #7f8c8d; line-height: 1.6; padding: 0 20px; }

        .restart-btn {
            margin-top: 40px;
            background: var(--secondary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
            cursor: pointer;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* --- å½©å¸¶ç‰¹æ•ˆ Canvas --- */
        #confetti-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 20;
        }

    </style>
</head>
<body>

<div id="app-container">
    <div class="header" id="header-area">
        <div class="step-text">ç¬¬ <span id="curr-num">1</span> é¡Œ / å…± 5 é¡Œ</div>
        <div class="progress-track">
            <div class="progress-bar" id="bar"></div>
        </div>
    </div>

    <div class="quiz-wrapper" id="quiz-box">
        </div>
</div>

<div id="result-screen">
    <canvas id="confetti-canvas"></canvas>
    <div class="trophy">ğŸ†</div>
    <div class="result-title">ä½œç­”å®Œæˆï¼</div>
    <div class="result-desc">
        å¤ªæ£’äº†ï¼<br>
        è«‹æŠŠç•«é¢å€Ÿçµ¦éš”å£åŒå­¸çœ‹çœ‹<br>
        æˆ–è€…èˆ‰æ‰‹è®“è€å¸«çŸ¥é“å–”ï¼
    </div>
    <button class="restart-btn" onclick="restartQuiz()">å†ç©ä¸€æ¬¡</button>
</div>

<script>
    // é¡Œç›®è³‡æ–™åº« (JSONæ ¼å¼ï¼Œæ–¹ä¾¿æœªä¾†æ“´å……)
    const questions = [
        {
            title: "1. è·Ÿå…’å¥³ä½å¤šé ï¼Œä½ è¦ºå¾—æœ€å‰›å¥½ï¼ŸğŸ ",
            options: ["ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ä½åœ¨ä¸€èµ·æœ€ç†±é¬§", "ğŸ² ä½éš”å£ (ä¸€ç¢—æ¹¯çš„è·é›¢)", "ğŸšŒ åŒç¸£å¸‚ (æƒ³çœ‹å†å»çœ‹)", "âœˆï¸ è¶Šé è¶Šå¥½ (è¦–è¨Šå°±å¥½)"]
        },
        {
            title: "2. åªæœ‰ä¸€å€‹äººåƒé£¯æ™‚ï¼Œä½ æœƒ...ï¼ŸğŸ±",
            options: ["ğŸ³ ç°¡å–®ç…®å€‹éºµ/ç‡™é’èœ", "ğŸ¥¡ è²·ä¾¿ç•¶/å«å¤–é€", "ğŸ§Š ç†±å†°ç®±å‰©ä¸‹çš„å‰©èœ", "ğŸ¦ è¶æ©Ÿå»åƒå¤§é¤"]
        },
        {
            title: "3. æœ‰å€‹ã€Œç”¨äº†å°±æœƒå ±å¹³å®‰ã€çš„ç†±æ°´ç“¶ï¼Œä½ æƒ³ç”¨å—ï¼ŸğŸ“±",
            options: ["ğŸ™†â€â™€ï¸ æƒ³ç”¨ (è®“å­©å­å®‰å¿ƒ)", "ğŸ™…â€â™‚ï¸ ä¸æƒ³ç”¨ (æ„Ÿè¦ºè¢«ç›£è¦–)", "ğŸ¤” çœ‹æ˜¯ä¸æ˜¯å…è²»çš„"]
        },
        {
            title: "4. é€ä½ ä¸€å€‹æ©Ÿå™¨äººï¼Œæœ€å¸Œæœ›å®ƒå¹«ä½ åšä»€éº¼ï¼ŸğŸ¤–",
            options: ["ğŸ§¹ æƒåœ°/æ´—å»æ‰€", "ğŸ‘©â€ğŸ³ ç…®é£¯/æ´—ç¢—", "ğŸ’† æŒ‰æ‘©/æ¥èƒŒ", "ğŸ—£ï¸ é™ªæˆ‘èŠå¤©"]
        },
        {
            title: "5. (å·å·å•) è¦ºå¾—ä¸€å€‹äººä½æœ€çˆ½çš„æ˜¯ï¼ŸğŸ‰",
            options: ["ğŸ“º é›»è¦–ä¸ç”¨æ¶é™æ§å™¨", "ğŸ¥˜ ä¸ç”¨ç…©æƒ±ç…®ä»€éº¼", "â° ä½œæ¯è‡ªç”±æƒ³ç¡å°±ç¡", "ğŸ©³ ç©¿è‘—éš¨ä¾¿è¶…è‡ªåœ¨"]
        }
    ];

    let currentStep = 0;
    const quizBox = document.getElementById('quiz-box');
    const bar = document.getElementById('bar');
    const currNum = document.getElementById('curr-num');
    const resultScreen = document.getElementById('result-screen');
    const headerArea = document.getElementById('header-area');

    // åˆå§‹åŒ–
    function init() {
        renderQuestions();
        updateProgress();
        showQuestion(0);
    }

    // æ¸²æŸ“æ‰€æœ‰é¡Œç›®å¡ç‰‡
    function renderQuestions() {
        quizBox.innerHTML = '';
        questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = `question-card ${index === 0 ? 'active' : ''}`;
            card.id = `q-${index}`;
            
            let html = `<div class="q-title">${q.title}</div><div class="options-grid">`;
            q.options.forEach(opt => {
                html += `<button class="option-btn" onclick="selectOption(this, ${index})">${opt}</button>`;
            });
            html += `</div>`;
            
            card.innerHTML = html;
            quizBox.appendChild(card);
        });
    }

    // é¸æ“‡ç­”æ¡ˆå¾Œçš„å‹•ä½œ
    function selectOption(btn, step) {
        // 1. è¦–è¦ºå›é¥‹
        const allBtns = btn.parentElement.children;
        for (let b of allBtns) b.classList.remove('selected');
        btn.classList.add('selected');

        // 2. å»¶é²åˆ‡æ›ä¸‹ä¸€é¡Œ (è®“ä½¿ç”¨è€…çœ‹æ¸…æ¥šè‡ªå·±é¸äº†ä»€éº¼)
        setTimeout(() => {
            if (step < questions.length - 1) {
                nextQuestion(step);
            } else {
                finishQuiz();
            }
        }, 400);
    }

    // åˆ‡æ›åˆ°ä¸‹ä¸€é¡Œçš„å‹•ç•«é‚è¼¯
    function nextQuestion(step) {
        const currentCard = document.getElementById(`q-${step}`);
        const nextCard = document.getElementById(`q-${step + 1}`);

        currentCard.classList.remove('active');
        currentCard.classList.add('exit-left'); // å¾€å·¦æ»‘å‡º

        nextCard.classList.add('active'); // å¾€å·¦æ»‘å…¥

        currentStep++;
        updateProgress();
    }

    // æ›´æ–°é€²åº¦æ¢
    function updateProgress() {
        currNum.innerText = currentStep + 1;
        const percent = ((currentStep + 1) / questions.length) * 100;
        bar.style.width = `${percent}%`;
    }

    // å®Œæˆå•å·
    function finishQuiz() {
        headerArea.style.opacity = '0'; // éš±è—é ‚éƒ¨
        resultScreen.classList.add('show'); // å½ˆå‡ºçµæœé 
        startConfetti(); // æ”¾å½©å¸¶
    }

    // é‡ç½®
    function restartQuiz() {
        currentStep = 0;
        headerArea.style.opacity = '1';
        resultScreen.classList.remove('show');
        renderQuestions(); // é‡æ–°æ¸²æŸ“ä»¥æ¸…é™¤é¸é …
        updateProgress();
    }
    
    function showQuestion(idx) {
        // Helper if needed
    }

    /* --- ç°¡å–®çš„å½©å¸¶ç‰¹æ•ˆ (Canvas) --- */
    function startConfetti() {
        const canvas = document.getElementById("confetti-canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particles = [];
        const colors = ['#FF8C42', '#4ECDC4', '#FFD93D', '#FF6B6B', '#6C5CE7'];

        for (let i = 0; i < 100; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                speed: Math.random() * 3 + 2,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 10 + 5,
                tilt: Math.random() * 10,
                tiltAngle: Math.random() * 10
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;

            particles.forEach(p => {
                p.y += p.speed;
                p.tiltAngle += 0.1;
                
                ctx.beginPath();
                ctx.lineWidth = p.size;
                ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + Math.cos(p.tiltAngle) * 10, p.y);
                ctx.lineTo(p.x + p.tilt, p.y + p.size);
                ctx.stroke();

                if (p.y < canvas.height) active = true;
            });

            if (active) requestAnimationFrame(draw);
        }
        draw();
    }

    // å•Ÿå‹•
    init();

</script>

</body>
</html>

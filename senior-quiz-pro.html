<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ê®ÇÈΩ°ÁîüÊ¥ªÂ§ßÂìâÂïè (ÈÄöÁî®ÂåÖÂÆπÁâà)</title>
    <style>
        /* --- ÂÖ®Â±ÄË®≠ÂÆö --- */
        :root {
            --primary: #FF8C42;
            --secondary: #4ECDC4;
            --bg: #FFF8E7;
            --card-bg: #FFFFFF;
            --text: #2C3E50;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #app-container {
            width: 100%;
            max-width: 500px;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 20px;
            background: var(--bg);
        }

        /* --- È†ÇÈÉ® --- */
        .header { padding: 20px 0; text-align: center; transition: opacity 0.3s;}
        .progress-track { width: 100%; height: 10px; background: #E0E0E0; border-radius: 5px; overflow: hidden; margin-top: 10px; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: width 0.5s ease; }
        .step-text { font-size: 1.2rem; font-weight: bold; color: var(--primary); }

        /* --- È°åÁõÆÂçÄ --- */
        .quiz-wrapper { flex: 1; position: relative; overflow: hidden; }
        .question-card {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 10px;
            display: flex; flex-direction: column;
            transform: translateX(100%); opacity: 0;
            transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            pointer-events: none;
        }
        .question-card.active { transform: translateX(0); opacity: 1; pointer-events: all; }
        .question-card.exit-left { transform: translateX(-100%) scale(0.9); opacity: 0; }

        .q-title { font-size: 1.6rem; font-weight: 800; line-height: 1.4; margin-bottom: 30px; color: #2c3e50; }
        
        .options-grid { display: grid; gap: 15px; }
        .option-btn {
            background: var(--card-bg); border: 2px solid transparent; padding: 20px;
            border-radius: 18px; font-size: 1.3rem; text-align: left;
            box-shadow: var(--shadow); cursor: pointer;
            transition: transform 0.1s, background 0.2s;
        }
        .option-btn:active { transform: scale(0.98); background-color: #FFE0B2; }
        .option-btn.selected { background-color: var(--primary); color: white; border-color: var(--primary); }

        /* --- ÂàÜÊûêÁµêÊûúÈ†Å --- */
        #result-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            display: flex; flex-direction: column;
            align-items: center;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 10;
            padding: 40px 20px;
        }
        #result-screen.show { transform: translateY(0); }

        .result-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            width: 100%;
            max-width: 400px;
            animation: popIn 0.8s 0.2s backwards;
            border-top: 10px solid var(--primary);
        }

        .result-emoji { font-size: 4rem; margin-bottom: 10px; display: block; }
        .result-type { font-size: 1.8rem; font-weight: bold; color: var(--primary); margin-bottom: 15px; }
        .result-desc { font-size: 1.1rem; color: #555; line-height: 1.6; text-align: left; margin-bottom: 20px; }
        
        .lucky-box {
            background: #FFF3E0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        .lucky-title { font-weight: bold; color: #E65100; font-size: 0.9rem; display: block; margin-bottom: 5px; }
        .lucky-text { font-size: 1.1rem; font-weight: bold; color: #333; }

        .restart-btn {
            margin-top: 30px;
            background: var(--secondary); color: white; border: none;
            padding: 15px 40px; font-size: 1.3rem; border-radius: 50px;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
            cursor: pointer;
            animation: fadeIn 1s 1s backwards;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- Canvas --- */
        #confetti-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 20; }

    </style>
</head>
<body>

<div id="app-container">
    <div class="header" id="header-area">
        <div class="step-text">Á¨¨ <span id="curr-num">1</span> È°å / ÂÖ± 5 È°å</div>
        <div class="progress-track"><div class="progress-bar" id="bar"></div></div>
    </div>

    <div class="quiz-wrapper" id="quiz-box"></div>
</div>

<div id="result-screen">
    <canvas id="confetti-canvas"></canvas>
    
    <div class="result-card">
        <span class="result-emoji" id="res-emoji">üîÆ</span>
        <div class="result-type" id="res-title">ÂàÜÊûê‰∏≠...</div>
        <div class="result-desc" id="res-desc">Ê≠£Âú®ÁÇ∫ÊÇ®Ë®àÁÆóÂ∞àÂ±¨ÁöÑÁîüÊ¥ªÈ¢®Ê†º...</div>
        
        <div class="lucky-box">
            <span class="lucky-title">‚ú® Áµ¶ÊÇ®ÁöÑÊ®ÇÈΩ°ÈáëÂè•</span>
            <span class="lucky-text" id="res-advice">...</span>
        </div>
    </div>

    <button class="restart-btn" onclick="location.reload()">ÂÜçÁé©‰∏ÄÊ¨°</button>
</div>

<script>
    // --- È°åÁõÆË≥áÊñôÂ∫´ (ÈÄöÁî®ÂåÖÂÆπÁâà) ---
    const questions = [
        {
            // ‰øÆÊîπÈªûÔºöÊää„ÄåÂÖíÂ•≥„ÄçÊîπÊàê„ÄåË¶™ÂèãÊàñÊòØÊôöËº©„Äç
            title: "1. Ë∑üË¶™ÂèãÊàñÊòØÊôöËº©‰ΩèÂ§öÈÅ†Ôºå‰Ω†Ë¶∫ÂæóÊúÄÂâõÂ•ΩÔºüüè†",
            options: [
                "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ‰ΩèÂú®‰∏ÄËµ∑ÊúÄÁÜ±È¨ß", 
                "üç≤ ‰ΩèÈöîÂ£Å (‰∏ÄÁ¢óÊπØÁöÑË∑ùÈõ¢)", 
                "üöå ÂêåÁ∏£Â∏Ç (ÊÉ≥ÁúãÂÜçÂéªÁúã)", 
                "‚úàÔ∏è Ë∂äÈÅ†Ë∂äÂ•Ω (Ë¶ñË®äÂ∞±Â•Ω)"
            ]
        },
        {
            title: "2. Âè™Êúâ‰∏ÄÂÄã‰∫∫ÂêÉÈ£ØÊôÇÔºå‰Ω†ÊúÉ...Ôºüüç±",
            options: [
                "üç≥ Á∞°ÂñÆÁÖÆÂÄãÈ∫µ/ÁáôÈùíËèú", 
                "ü•° Ë≤∑‰æøÁï∂/Âè´Â§ñÈÄÅ", 
                "üßä ÁÜ±ÂÜ∞ÁÆ±Ââ©‰∏ãÁöÑÂâ©Ëèú", 
                "ü¶û Ë∂ÅÊ©üÂéªÂêÉÂ§ßÈ§ê"
            ]
        },
        {
            // ‰øÆÊîπÈªûÔºöÊää„ÄåÂÖíÂ•≥„ÄçÊîπÊàê„Äå‰ø°‰ªªÁöÑ‰∫∫„Äç
            title: "3. ÊúâÂÄã„ÄåÁî®‰∫ÜÂ∞±ÊúÉÂ†±Âπ≥ÂÆâ„ÄçÁöÑÁÜ±Ê∞¥Áì∂Ôºå‰Ω†ÊÉ≥Áî®ÂóéÔºüüì±",
            options: [
                "üôÜ‚Äç‚ôÄÔ∏è ÊÉ≥Áî® (ËÆì‰ø°‰ªªÁöÑ‰∫∫ÂÆâÂøÉ)", 
                "üôÖ‚Äç‚ôÇÔ∏è ‰∏çÊÉ≥Áî® (ÊÑüË¶∫Ë¢´Áõ£Ë¶ñ)", 
                "ü§î ÁúãÊòØ‰∏çÊòØÂÖçË≤ªÁöÑ"
            ]
        },
        {
            title: "4. ÈÄÅ‰Ω†‰∏ÄÂÄãÊ©üÂô®‰∫∫ÔºåÊúÄÂ∏åÊúõÂÆÉÂπ´‰Ω†ÂÅö‰ªÄÈ∫ºÔºüü§ñ",
            options: [
                "üßπ ÊéÉÂú∞/Ê¥óÂªÅÊâÄ", 
                "üë©‚Äçüç≥ ÁÖÆÈ£Ø/Ê¥óÁ¢ó", 
                "üíÜ ÊåâÊë©/Êê•ËÉå", 
                "üó£Ô∏è Èô™ÊàëËÅäÂ§©"
            ]
        },
        {
            title: "5. (ÂÅ∑ÂÅ∑Âïè) Ë¶∫Âæó‰∏ÄÂÄã‰∫∫‰ΩèÊúÄÁàΩÁöÑÊòØÔºüüéâ",
            options: [
                "üì∫ ÈõªË¶ñ‰∏çÁî®Êê∂ÈÅôÊéßÂô®", 
                "ü•ò ‰∏çÁî®ÁÖ©ÊÉ±ÁÖÆ‰ªÄÈ∫º", 
                "‚è∞ ‰ΩúÊÅØËá™Áî±ÊÉ≥Áù°Â∞±Áù°", 
                "ü©≥ Á©øËëóÈö®‰æøË∂ÖËá™Âú®"
            ]
        }
    ];

    // --- ÁµêÊûúÂàÜÊûêË≥áÊñôÂ∫´ (ÈÄöÁî®ÂåÖÂÆπÁâà) ---
    const results = [
        {
            type: "üëë Èú∏Ê∞£Áç®Á´ãÁéã",
            emoji: "üëë",
            desc: "ÊÇ®ÊòØ‰∏ÄÂÄãÈùûÂ∏∏Ê∏ÖÊ•öËá™Â∑±Ë¶Å‰ªÄÈ∫ºÁöÑ‰∫∫ÔºÅ‰∫´ÂèóËá™Áî±„ÄÅ‰∏çÂñúÊ≠°È∫ªÁÖ©Âà•‰∫∫„ÄÇÂ∞çÊÇ®‰æÜË™™ÔºåÊìÅÊúâÁç®ËôïÁöÑÊôÇÈñìÊòØ‰∏ÄÁ®ÆËá≥È´òÁÑ°‰∏äÁöÑ„Äå‰∫´Âèó„Äç„ÄÇ",
            advice: "ÊääÊôÇÈñìÁïôÁµ¶Ëá™Â∑±ÔºåÊÇ®Â∞±ÊòØËá™Â∑±‰∫∫ÁîüÁöÑÂúãÁéãÔºÅ"
        },
        {
            type: "‚ú® Êô∫ÊÖßÁîüÊ¥ªÂÆ∂",
            emoji: "‚ú®",
            desc: "ÊÇ®ÁöÑÂøÉÊÖãÈùûÂ∏∏Âπ¥ËºïÔºÅÂ∞çÊñºÊñ∞‰∫ãÁâ©Êé•ÂèóÂ∫¶È´ò„ÄÇÊÇ®ÊáÇÂæóÂñÑÁî®Â∑•ÂÖ∑ÔºàÂ§ñÈÄÅ„ÄÅÂÆ∂ÈõªÔºâËÆìÁîüÊ¥ªÊõ¥ËºïÈ¨ÜÔºåÊòØÂ§ßÂÆ∂Áúº‰∏≠ÁöÑÊΩÆ‰∫∫Áâ©ÔºÅ",
            advice: "‰øùÊåÅÂ•ΩÂ•áÂøÉÔºåÁßëÊäÄÂ∞±ÊòØÊÇ®ÁöÑÊúÄ‰Ω≥Á•ûÈöäÂèã„ÄÇ"
        },
        {
            type: "‚ù§Ô∏è Ê∫´ÊöñÂÆàË≠∑ËÄÖ",
            emoji: "‚ù§Ô∏è",
            // ‰øÆÊîπÈªûÔºöÊää„ÄåÂ≠©Â≠ê„ÄçÊîπÊàê„ÄåÈáçË¶ÅÁöÑ‰∫∫„Äç
            desc: "Â∞çÊÇ®‰æÜË™™Ôºå‰∫∫Ëàá‰∫∫ÁöÑÈÄ£ÁµêÊòØÊúÄÈáçË¶ÅÁöÑ„ÄÇÂç≥‰ΩøÊ≤íÊúâ‰ΩèÂú®‰∏ÄËµ∑ÔºåÊÇ®ÁöÑÂøÉ‰πüÁ∏ΩÊòØÊéõÂøµËëóÈÇ£‰∫õÈáçË¶ÅÁöÑ‰∫∫„ÄÇÊÇ®ÊòØÂÄãÊ∫´Êüî‰∏îË≤ºÂøÉÁöÑ‰∫∫„ÄÇ",
            advice: "ÁÖßÈ°ßÂà•‰∫∫ÁöÑÂêåÊôÇÔºåÂà•Âøò‰∫Ü‰πüË¶ÅÂ§öÊÑõËá™Â∑±‰∏ÄÈªûÂñîÔºÅ"
        },
        {
            type: "üåø Ê®ÇÊ¥ªËá™Áî±Ê¥æ",
            emoji: "üåø",
            desc: "ÊÇ®ÂæàÈö®ÂíåÔºåË¶∫ÂæóÊó•Â≠êÈÅéÂæóÈñãÂøÉÊúÄÈáçË¶Å„ÄÇ‰∏çÂº∑Ê±ÇÂÆåÁæéÔºåÂñúÊ≠°È†ÜÂÖ∂Ëá™ÁÑ∂„ÄÇÊÇ®ÁöÑÁîüÊ¥ªÂÖÖÊªø‰∫ÜÂ∞èÁ¢∫Âπ∏ÔºåÊòØÊáÇÂæóÊîæÈ¨ÜÁöÑÈ´òÊâã„ÄÇ",
            advice: "‰ªäÂ§©‰∏çÁî®ÁÖÆ‰∫ÜÔºåÂéªÂêÉÈ†ìÂ•ΩÊñôÁöÑÁäíË≥ûËá™Â∑±ÂêßÔºÅ"
        }
    ];

    let currentStep = 0;
    let userAnswers = []; 

    const quizBox = document.getElementById('quiz-box');
    const bar = document.getElementById('bar');
    const currNum = document.getElementById('curr-num');
    const resultScreen = document.getElementById('result-screen');
    const headerArea = document.getElementById('header-area');

    // UI ÂÖÉÁ¥†
    const resTitle = document.getElementById('res-title');
    const resDesc = document.getElementById('res-desc');
    const resAdvice = document.getElementById('res-advice');
    const resEmoji = document.getElementById('res-emoji');

    function init() {
        renderQuestions();
        updateProgress();
    }

    function renderQuestions() {
        quizBox.innerHTML = '';
        questions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = `question-card ${index === 0 ? 'active' : ''}`;
            card.id = `q-${index}`;
            
            let html = `<div class="q-title">${q.title}</div><div class="options-grid">`;
            q.options.forEach((opt, optIdx) => {
                html += `<button class="option-btn" onclick="selectOption(this, ${index}, ${optIdx})">${opt}</button>`;
            });
            html += `</div>`;
            
            card.innerHTML = html;
            quizBox.appendChild(card);
        });
    }

    function selectOption(btn, step, optIdx) {
        userAnswers[step] = optIdx;
        const allBtns = btn.parentElement.children;
        for (let b of allBtns) b.classList.remove('selected');
        btn.classList.add('selected');

        setTimeout(() => {
            if (step < questions.length - 1) {
                nextQuestion(step);
            } else {
                finishQuiz();
            }
        }, 400);
    }

    function nextQuestion(step) {
        const currentCard = document.getElementById(`q-${step}`);
        const nextCard = document.getElementById(`q-${step + 1}`);
        currentCard.classList.remove('active');
        currentCard.classList.add('exit-left');
        nextCard.classList.add('active');
        currentStep++;
        updateProgress();
    }

    function updateProgress() {
        currNum.innerText = currentStep + 1;
        const percent = ((currentStep + 1) / questions.length) * 100;
        bar.style.width = `${percent}%`;
    }

    function finishQuiz() {
        headerArea.style.opacity = '0';
        
        // --- Á∞°ÊòìÂàÜÊûêÈÇèËºØ ---
        let finalResult;
        const q4Answer = userAnswers[3]; 
        const q5Answer = userAnswers[4]; 

        if (q4Answer === 3) { 
            finalResult = results[2]; 
        } else if (q4Answer === 0 || q4Answer === 1) {
            finalResult = results[1]; 
        } else if (q5Answer === 3) {
            finalResult = results[3]; 
        } else {
            finalResult = results[0]; 
        }

        resTitle.innerText = finalResult.type;
        resEmoji.innerText = finalResult.emoji;
        resDesc.innerText = finalResult.desc;
        resAdvice.innerText = finalResult.advice;

        resultScreen.classList.add('show');
        startConfetti();
    }

    function startConfetti() {
        const canvas = document.getElementById("confetti-canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];
        const colors = ['#FF8C42', '#4ECDC4', '#FFD93D', '#FF6B6B', '#6C5CE7'];
        for (let i = 0; i < 120; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                speed: Math.random() * 3 + 3,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 10 + 5,
                tilt: Math.random() * 10,
                tiltAngle: Math.random() * 10
            });
        }
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;
            particles.forEach(p => {
                p.y += p.speed;
                p.tiltAngle += 0.1;
                ctx.beginPath();
                ctx.lineWidth = p.size;
                ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + Math.cos(p.tiltAngle) * 10, p.y);
                ctx.lineTo(p.x + p.tilt, p.y + p.size);
                ctx.stroke();
                if (p.y < canvas.height) active = true;
            });
            if (active) requestAnimationFrame(draw);
        }
        draw();
    }

    init();
</script>

</body>
</html>
